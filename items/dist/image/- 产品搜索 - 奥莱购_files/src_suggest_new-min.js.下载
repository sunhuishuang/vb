$(document).ready(function(){$('body').delegate('#key','focus',function(){if($(".suggest_result").html()){$(".suggest_result").slideDown()}});$('body').delegate('#key','blur',function(){$(".suggest_result").delay(500).slideUp()});$('body').delegate('#key','keyup',function(a){if(a.keyCode!=13&&a.keyCode!=37&&a.keyCode!=38&&a.keyCode!=39&&a.keyCode!=40&&a.keyCode!=46){DelayToSearch()}});$('body').delegate('#key','keydown',function(){if(a.keyCode==40){if(window.st_showSuggest){if(isNaN(window.st_suggestIndex)){window.st_suggestIndex=-1}childLength=$(".suggest_result").children().length;window.st_suggestIndex++;if(window.st_suggestIndex>(childLength-1)){window.st_suggestIndex=0}child=$(".suggest_result").children()[window.st_suggestIndex];$(child).css("background","rgb(255,223,198)");this.value=$(child).attr("suggestWord");setSg("key");for(i=0;i<childLength;i++){if(i!=window.st_suggestIndex){childItem=$(".suggest_result").children()[i];$(childItem).css("background","white")}}}}else{if(a.keyCode==38){if(window.st_showSuggest){if(isNaN(window.st_suggestIndex)){window.st_suggestIndex=-1}childLength=$(".suggest_result").children().length;window.st_suggestIndex--;if(window.st_suggestIndex<0){window.st_suggestIndex=childLength-1}child=$(".suggest_result").children()[window.st_suggestIndex];$(child).css("background","rgb(255,223,198)");this.value=$(child).attr("suggestWord");setSg("key");for(i=0;i<childLength;i++){if(i!=window.st_suggestIndex){childItem=$(".suggest_result").children()[i];$(childItem).css("background","white")}}}}}});$("#key").blur();foldfilter()});function DelayToSearch(){clearTimeout(window.st_search);window.st_search=setTimeout(getsearch,200)}function sortbylen(a,b){if((!a)&&(!b)){return 0}if(!a){return-1}if(!b){return 1}if((a.iscat==1)&&(b.iscat==1)){if(a.numfd>b.numfd){return-1}else{if(a.numfd==b.numfd){return 0}else{return 1}}}if(a.iscat==1){return-1}if(b.iscat==1){return-1}if((a.isbrd==1)&&(b.isbrd==1)){if(a.numfd>b.numfd){return-1}else{if(a.numfd==b.numfd){return 0}else{return 1}}}if((!a.chnw)&&(!b.chnw)){return 0}if(!a.chnw){return-1}if(!b.chnw){return 1}if(a.chnw.length==b.chnw.length){return 0}if(a.chnw.length<b.chnw.length){return-1}if(a.chnw.length>b.chnw.length){return 1}return 0}function getsearch(){window.st_suggestIndex=-1;if($("#key").val()){if(locache.get($("#key").val())){var a="";var d="";var c=-1;var b=-1;intMaxCatCount=1;intMaxBrdCount=16;intCatCount=0;intBrdCount=0;window.st_suggestCache=locache.get($("#key").val());$.each(window.st_suggestCache,function(f,e){strKey=$("#key").val();strKeyArray=strKey.split("");objKeyCharIndexes=[];objKeyStringIndexes=[];keyCharCurrentIndex=-1;for(i=0;i<strKeyArray.length;i++){keyIndex=e.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex,1);keyIndex2=e.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex+1,1);if(keyIndex>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex;objKeyCharIndexes.push(keyIndex)}else{if(keyIndex2>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex2;objKeyCharIndexes.push(keyIndex2)}}}strSwchnArray=e.chnw.split("");strSwchn="";for(i=0;i<objKeyCharIndexes.length;i++){strSwchnArray[objKeyCharIndexes[i]]='<b class="red">'+strSwchnArray[objKeyCharIndexes[i]]+"</b>"}for(i=0;i<strSwchnArray.length;i++){strSwchn+=strSwchnArray[i]}if(objKeyCharIndexes.length>0){c++;if(e.iscat==1){if(intCatCount<intMaxCatCount){a+="\t<a onmouseover='suggest(this)' posIndex="+c+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+e.cid+'"><span class="fl">\u5728->'+strSwchn+' \u5206\u7c7b\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{a+="\t<a onmouseover='suggest(this)' posIndex="+c+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+e.cid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intCatCount++}else{if(e.isbrd==1){if(intBrdCount<intMaxBrdCount){a+="\t<a onmouseover='suggest(this)' posIndex="+c+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+e.bid+'"><span class="fl">\u5728->'+strSwchn+' \u54c1\u724c\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{a+="\t<a onmouseover='suggest(this)' posIndex="+c+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+e.bid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intBrdCount++}else{a+="\t<a onclick='setkeyvalue(this);return true;' onmouseover='suggest(this)' posIndex="+c+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?keyword="+escape(e.chnw)+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}}}});b=c;$.each(window.st_suggestCache,function(f,e){strKey=$("#key").val();strKeyArray=strKey.split("");objKeyCharIndexes=[];objKeyStringIndexes=[];keyCharCurrentIndex=-1;for(i=0;i<strKeyArray.length;i++){keyIndex=e.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex,1);keyIndex2=e.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex+1,1);if(keyIndex>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex;objKeyCharIndexes.push(keyIndex)}else{if(keyIndex2>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex2;objKeyCharIndexes.push(keyIndex2)}}}strSwchnArray=e.chnw.split("");strSwchn="";for(i=0;i<objKeyCharIndexes.length;i++){strSwchnArray[objKeyCharIndexes[i]]='<b class="red">'+strSwchnArray[objKeyCharIndexes[i]]+"</b>"}for(i=0;i<strSwchnArray.length;i++){strSwchn+=strSwchnArray[i]}if(objKeyCharIndexes.length<=0){b++;if(e.iscat==1){if(intCatCount<intMaxCatCount){a+="\t<a onmouseover='suggest(this)' posIndex="+b+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+e.cid+'"><span class="fl">\u5728->'+strSwchn+' \u5206\u7c7b\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{a+="\t<a onmouseover='suggest(this)' posIndex="+b+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+e.cid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intCatCount++}else{if(e.isbrd==1){if(intBrdCount<intMaxBrdCount){a+="\t<a onmouseover='suggest(this)' posIndex="+b+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+e.bid+'"><span class="fl">\u5728->'+strSwchn+' \u54c1\u724c\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{a+="\t<a onmouseover='suggest(this)' posIndex="+b+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+e.bid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intBrdCount++}else{a+="\t<a onclick='setkeyvalue(this);return true;' onmouseover='suggest(this)' posIndex="+b+" suggestWord='"+e.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?keyword="+escape(e.chnw)+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+e.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}}}});$(".suggest_result").html(a+d);$(".suggest_result").slideDown();window.st_showSuggest=true}else{$.ajax({cache:true,url:hs.domain.search+"/handler/suggest.ashx",data:"cmd=GetSuggestWords&keyword="+escape($("#key").val())+"&order=1_1&page=1&psize=16&fp=1&iz=0",type:"GET",jsonpCallback:"callback",contentType:"application/javascript",dataType:"jsonp",error:function(){$(".suggest_result").html("\u6ca1\u6709\u627e\u5230\u4efb\u4f55\u4ea7\u54c1\uff0c\u8bf7\u5c1d\u8bd5\u4fee\u6539\u5173\u952e\u8bcd");window.st_showSuggest=false},success:function(e){if(e.Code==0){if(e.Data.SuggestVMs.length==0){window.st_showSuggest=false}else{var f="";var k="";var j=-1;var h=-1;var g=[];intMaxCatCount=1;intMaxBrdCount=16;intCatCount=0;intBrdCount=0;if(e.Data.SuggestVMs.length>=2){firstSuggestVM=[];firstSuggestVM.push(e.Data.SuggestVMs[0]);e.Data.SuggestVMs=e.Data.SuggestVMs.slice(1,e.Data.SuggestVMs.length);e.Data.SuggestVMs.sort(sortbylen);e.Data.SuggestVMs=firstSuggestVM.concat(e.Data.SuggestVMs);window.st_suggestCache=e.Data.SuggestVMs;locache.set($("#key").val(),window.st_suggestCache,30)}else{g.push(e.Data.SuggestVMs[0]);if(window.st_suggestCache){for(i=0;i<window.st_suggestCache.length;i++){if(window.st_suggestCache[i].chnw.toLowerCase()!=e.Data.SuggestVMs[0].chnw.toLowerCase()){if(i==0){if(window.st_suggestCache[i].numfd>0){g.push(window.st_suggestCache[i])}}else{g.push(window.st_suggestCache[i])}}}}firstSuggestVM=[];firstSuggestVM.push(g[0]);g=g.slice(1,g.length);g.sort(sortbylen);g=firstSuggestVM.concat(g);window.st_suggestCache=g;locache.set($("#key").val(),window.st_suggestCache,30)}$.each(window.st_suggestCache,function(m,l){strKey=$("#key").val();strKeyArray=strKey.split("");objKeyCharIndexes=[];objKeyStringIndexes=[];keyCharCurrentIndex=-1;for(i=0;i<strKeyArray.length;i++){keyIndex=l.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex,1);keyIndex2=l.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex+1,1);if(keyIndex>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex;objKeyCharIndexes.push(keyIndex)}else{if(keyIndex2>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex2;objKeyCharIndexes.push(keyIndex2)}}}strSwchnArray=l.chnw.split("");strSwchn="";for(i=0;i<objKeyCharIndexes.length;i++){strSwchnArray[objKeyCharIndexes[i]]='<b class="red">'+strSwchnArray[objKeyCharIndexes[i]]+"</b>"}for(i=0;i<strSwchnArray.length;i++){strSwchn+=strSwchnArray[i]}if(objKeyCharIndexes.length>0){j++;if(l.iscat==1){if(intCatCount<intMaxCatCount){f+="\t<a onmouseover='suggest(this)' posIndex="+j+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+l.cid+'"><span class="fl">\u5728->'+strSwchn+' \u5206\u7c7b\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{f+="\t<a onmouseover='suggest(this)' posIndex="+j+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+l.cid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intCatCount++}else{if(l.isbrd==1){if(intBrdCount<intMaxBrdCount){f+="\t<a onmouseover='suggest(this)' posIndex="+j+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+l.bid+'"><span class="fl">\u5728->'+strSwchn+' \u54c1\u724c\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{f+="\t<a onmouseover='suggest(this)' posIndex="+j+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+l.bid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intBrdCount++}else{f+="\t<a onclick='setkeyvalue(this);return true;' onmouseover='suggest(this)' posIndex="+j+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?keyword="+escape(l.chnw)+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}}}});h=j;$.each(window.st_suggestCache,function(m,l){strKey=$("#key").val();strKeyArray=strKey.split("");objKeyCharIndexes=[];objKeyStringIndexes=[];keyCharCurrentIndex=-1;for(i=0;i<strKeyArray.length;i++){keyIndex=l.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex,1);keyIndex2=l.chnw.indexOf(strKeyArray[i],keyCharCurrentIndex+1,1);if(keyIndex>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex;objKeyCharIndexes.push(keyIndex)}else{if(keyIndex2>keyCharCurrentIndex){keyCharCurrentIndex=keyIndex2;objKeyCharIndexes.push(keyIndex2)}}}strSwchnArray=l.chnw.split("");strSwchn="";for(i=0;i<objKeyCharIndexes.length;i++){strSwchnArray[objKeyCharIndexes[i]]='<b class="red">'+strSwchnArray[objKeyCharIndexes[i]]+"</b>"}for(i=0;i<strSwchnArray.length;i++){strSwchn+=strSwchnArray[i]}if(objKeyCharIndexes.length<=0){h++;if(l.iscat==1){if(intCatCount<intMaxCatCount){f+="\t<a onmouseover='suggest(this)' posIndex="+h+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+l.cid+'"><span class="fl">\u5728->'+strSwchn+' \u5206\u7c7b\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{f+="\t<a onmouseover='suggest(this)' posIndex="+h+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?pcid="+l.cid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intCatCount++}else{if(l.isbrd==1){if(intBrdCount<intMaxBrdCount){f+="\t<a onmouseover='suggest(this)' posIndex="+h+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+l.bid+'"><span class="fl">\u5728->'+strSwchn+' \u54c1\u724c\u4e2d\u641c\u7d22</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}else{f+="\t<a onmouseover='suggest(this)' posIndex="+h+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?bid="+l.bid+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}intBrdCount++}else{f+="\t<a onclick='setkeyvalue(this);return true;' onmouseover='suggest(this)' posIndex="+h+" suggestWord='"+l.chnw+'\' class="suggest_word clearfix" target="_blank" href="'+hs.domain.search+"/search.aspx?keyword="+escape(l.chnw)+'"><span class="fl">'+strSwchn+'</span><span class="fr">\u7ea6<b class="palegreen">'+l.numfd+"</b>\u4e2a\u5546\u54c1</span></a>\n"}}}});$(".suggest_result").html(f+k)}}else{window.st_showSuggest=false}$(".suggest_result").slideDown();window.st_showSuggest=true}})}}else{$(".suggest_result").html("");$(".suggest_result").slideUp();window.st_showSuggest=false}}function setkeyvalue(a){if(a){$("#key").val($(a).attr("suggestWord"))}}function suggest(a){if(window.st_showSuggest){if(isNaN(window.st_suggestIndex)){window.st_suggestIndex=$(a).attr("posIndex");$(a).css("background","rgb(255,223,198)")}else{childLength=$(".suggest_result").children().length;if((window.st_suggestIndex>=0)&&(window.st_suggestIndex<=(childLength-1))){childItem=$(".suggest_result").children()[window.st_suggestIndex];$(childItem).css("background","white");window.st_suggestIndex=$(a).attr("posIndex");$(a).css("background","rgb(255,223,198)")}else{window.st_suggestIndex=$(a).attr("posIndex");$(a).css("background","rgb(255,223,198)")}}}}function actionNewSearch(a){var b=$(a);if(b){if(b.attr("href")){location.href=b.attr("href")}}}function clearSg(b){var a=$("#"+b);if(a){a.attr("sgHref","");a.attr("sgIndex","");a.attr("sgWord","")}}function setSg(c){var b=$("#"+c);if(b){var a=$(".suggest_result");if(window.st_suggestIndex){domSuggestItem=a.children().eq(window.st_suggestIndex);if(domSuggestItem){b.attr("sgHref",domSuggestItem.attr("href"));b.attr("sgIndex",domSuggestItem.attr("posIndex"));b.attr("sgWord",domSuggestItem.attr("suggestword"))}}}}function search(c){var b=$("#"+c);if(b){var a=b.val();if(a!="\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0..."){if(b.attr("sgHref")==""){window.location.href=hs.domain.search+"/search.aspx?keyword="+encodeURIComponent(a)}else{if(escape(b.attr("sgWord"))==encodeURIComponent(a)){window.location.href=b.attr("sgHref")}else{window.location.href=hs.domain.search+"/search.aspx?keyword="+encodeURIComponent(a)}}}}}function foldfilter(){$("dd.select-hold").each(function(){if($(this).siblings("dd").find("li").length>26){$(this).addClass("open");$(this).siblings("dd").addClass("h120")}$(this).click(function(){if($(this).hasClass("close")){$(this).removeClass("close").addClass("open").html("\u5c55\u5f00").siblings("dd").addClass("h120")}else{$(this).addClass("close").removeClass("open").html("\u6536\u8d77").siblings("dd").removeClass("h120")}})})};